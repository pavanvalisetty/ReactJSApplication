{"ast":null,"code":"import { _ as _objectWithoutPropertiesLoose, a as _objectSpread2 } from '../_rollupPluginBabelHelpers-1f0bf8c2.js';\nimport { createComponent } from 'reakit-system/createComponent';\nimport { createHook } from 'reakit-system/createHook';\nimport 'reakit-utils/shallowEqual';\nimport '../Box/Box.js';\nimport { useRef, useEffect } from 'react';\nimport { useForkRef } from 'reakit-utils/useForkRef';\nimport 'reakit-utils/useLiveRef';\nimport 'reakit-utils/isSelfTarget';\nimport '../Id/IdProvider.js';\nimport { unstable_useId } from '../Id/Id.js';\nimport '../__keys-e6a5cfbe.js';\nimport { useDisclosureContent } from '../Disclosure/DisclosureContent.js';\nimport { b as TAB_PANEL_KEYS } from '../__keys-15b65aac.js';\n\nfunction getTabsWithoutPanel(tabs, panels) {\n  var panelsTabIds = panels.map(function (panel) {\n    return panel.groupId;\n  }).filter(Boolean);\n  return tabs.filter(function (item) {\n    return panelsTabIds.indexOf(item.id || undefined) === -1;\n  });\n}\n\nfunction getPanelIndex(panels, panel) {\n  var panelsWithoutTabId = panels.filter(function (p) {\n    return !p.groupId;\n  });\n  return panelsWithoutTabId.indexOf(panel);\n}\n/**\n * When <TabPanel> is used without tabId:\n *\n *   - First render: getTabId will return undefined because options.panels\n * doesn't contain the current panel yet (registerPanel wasn't called yet).\n * Thus registerPanel will be called without groupId (tabId).\n *\n *   - Second render: options.panels already contains the current panel\n * (because registerPanel was called in the previous render). This means that\n * we'll be able to get the related tabId with the tab panel index. Basically,\n * we filter out all the tabs and panels that have already matched. In this\n * phase, registerPanel will be called again with the proper groupId (tabId).\n *\n *   - In the third render, panel.groupId will be already defined, so we just\n * return it. registerPanel is not called.\n */\n\n\nfunction getTabId(options) {\n  var _options$panels, _tabsWithoutPanel$pan;\n\n  var panel = (_options$panels = options.panels) === null || _options$panels === void 0 ? void 0 : _options$panels.find(function (p) {\n    return p.id === options.id;\n  });\n  var tabId = options.tabId || (panel === null || panel === void 0 ? void 0 : panel.groupId);\n\n  if (tabId || !panel || !options.panels || !options.items) {\n    return tabId;\n  }\n\n  var panelIndex = getPanelIndex(options.panels, panel);\n  var tabsWithoutPanel = getTabsWithoutPanel(options.items, options.panels);\n  return ((_tabsWithoutPanel$pan = tabsWithoutPanel[panelIndex]) === null || _tabsWithoutPanel$pan === void 0 ? void 0 : _tabsWithoutPanel$pan.id) || undefined;\n}\n\nvar useTabPanel = createHook({\n  name: \"TabPanel\",\n  compose: [unstable_useId, useDisclosureContent],\n  keys: TAB_PANEL_KEYS,\n  useProps: function useProps(options, _ref) {\n    var htmlRef = _ref.ref,\n        htmlProps = _objectWithoutPropertiesLoose(_ref, [\"ref\"]);\n\n    var ref = useRef(null);\n    var tabId = getTabId(options);\n    var id = options.id,\n        registerPanel = options.registerPanel,\n        unregisterPanel = options.unregisterPanel;\n    useEffect(function () {\n      if (!id) return undefined;\n      registerPanel === null || registerPanel === void 0 ? void 0 : registerPanel({\n        id: id,\n        ref: ref,\n        groupId: tabId\n      });\n      return function () {\n        unregisterPanel === null || unregisterPanel === void 0 ? void 0 : unregisterPanel(id);\n      };\n    }, [tabId, id, registerPanel, unregisterPanel]);\n    return _objectSpread2({\n      ref: useForkRef(ref, htmlRef),\n      role: \"tabpanel\",\n      tabIndex: 0,\n      \"aria-labelledby\": tabId\n    }, htmlProps);\n  },\n  useComposeOptions: function useComposeOptions(options) {\n    var tabId = getTabId(options);\n    return _objectSpread2({\n      visible: tabId ? options.selectedId === tabId : false\n    }, options);\n  }\n});\nvar TabPanel = createComponent({\n  as: \"div\",\n  useHook: useTabPanel\n});\nexport { TabPanel, useTabPanel };","map":null,"metadata":{},"sourceType":"module"}